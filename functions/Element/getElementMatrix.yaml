shared: &shared
  name: getElementMatrix
  pair: setElementMatrix
  oop:
    element: element
    method: getMatrix
    variable: matrix
  description: This function gets an element's transform [[matrix]]. This contains 16 [[float]] values that multiplied to a point will give you the point transformed. It is most useful for matrix calculations such as calculating offsets. For further information, please refer to a tutorial of matrices in computer graphics programming.
  notes:
    - type: info
      content: The [[matrix]] returned by this function [is not setup correctly for some calculations](http://bugs.mtasa.com/view.php?id=6984) unless the legacy argument is set to **false**.
    - type: tip
      content: For [[matrix]] manipulation which goes beyond the basic examples given on this page, see the [Lua matrix library](/reference/Matrix_library). If you are using MTA SA 1.4 or higher, using the built-in [[matrix]] class is also recommended.
  parameters:
    - name: theElement
      type: element
      description: The [[element]] which you wish to retrieve the [[matrix]] for.
    - name: legacy
      type: bool
      description: Set to **false** to return correctly setup [[matrix]] (i.e. Last column in the first 3 rows set to zero).
      default: 'true'
  returns:
    description: Returns a multi-dimensional array (which can be transformed into a proper [[matrix]] class using `Matrix.create` method) containing a 4x4 matrix. Returns **false** if the element is invalid or not streamed in.
    values:
      - type: table|false
        name: matrix
  examples:
    - path: examples/getElementMatrix-1.lua
      description: This example creates a utility function that turns an offset into a position that is relative to the specified element.
    - path: examples/getElementMatrix-2.lua
      description: This example creates some more matrix utility functions.
    - path: examples/getElementMatrix-3.lua
      description: This example function allows you to get the element matrix of an element that is not streamed in.
  meta:
    - changelog:
        - version: 1.3.0-9.04186	
          description: Added **legacy** argument.

server:
  <<: *shared
  examples:
    - path: examples/getElementMatrix-4.lua
      description: Create a Ped (0, 0, 5, 0) and put the player to 10 m of distance, front to front.
    
client:
  <<: *shared
  examples:
    - path: examples/getElementMatrix_OOP-1.lua
      oop: true